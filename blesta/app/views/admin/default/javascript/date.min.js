/*
 * Date prototype extensions. Doesn't depend on any
 * other code. Doens't overwrite existing methods.
 *
 * Adds dayNames, abbrDayNames, monthNames and abbrMonthNames static properties and isLeapYear,
 * isWeekend, isWeekDay, getDaysInMonth, getDayName, getMonthName, getDayOfYear, getWeekOfYear,
 * setDayOfYear, addYears, addMonths, addDays, addHours, addMinutes, addSeconds methods
 *
 * Copyright (c) 2006 JÃ¶rn Zaefferer and Brandon Aaron (brandon.aaron@gmail.com || http://brandonaaron.net)
 *
 * Additional methods and properties added by Kelvin Luck: firstDayOfWeek, dateFormat, zeroTime, asString, fromString -
 * I've added my name to these methods so you know who to blame if they are broken!
 * 
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 *
 */
Date.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"];Date.abbrDayNames=["Sun","Mon","Tue","Wed","Thu","Fri","Sat"];Date.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];Date.abbrMonthNames=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];Date.firstDayOfWeek=1;Date.format="dd/mm/yyyy";Date.fullYearStart="20";(function(){function e(e,t){if(!Date.prototype[e]){Date.prototype[e]=t}}e("isLeapYear",function(){var e=this.getFullYear();return e%4==0&&e%100!=0||e%400==0});e("isWeekend",function(){return this.getDay()==0||this.getDay()==6});e("isWeekDay",function(){return!this.isWeekend()});e("getDaysInMonth",function(){return[31,this.isLeapYear()?29:28,31,30,31,30,31,31,30,31,30,31][this.getMonth()]});e("getDayName",function(e){return e?Date.abbrDayNames[this.getDay()]:Date.dayNames[this.getDay()]});e("getMonthName",function(e){return e?Date.abbrMonthNames[this.getMonth()]:Date.monthNames[this.getMonth()]});e("getDayOfYear",function(){var e=new Date("1/1/"+this.getFullYear());return Math.floor((this.getTime()-e.getTime())/864e5)});e("getWeekOfYear",function(){return Math.ceil(this.getDayOfYear()/7)});e("setDayOfYear",function(e){this.setMonth(0);this.setDate(e);return this});e("addYears",function(e){this.setFullYear(this.getFullYear()+e);return this});e("addMonths",function(e){var t=this.getDate();this.setMonth(this.getMonth()+e);if(t>this.getDate())this.addDays(-this.getDate());return this});e("addDays",function(e){var t=this.getTimezoneOffset(),n;this.setTime(this.getTime()+e*864e5);n=this.getTimezoneOffset();if(n!==t){this.setTime(this.getTime()+(n-t)*60*1e3)}return this});e("addHours",function(e){this.setHours(this.getHours()+e);return this});e("addMinutes",function(e){this.setMinutes(this.getMinutes()+e);return this});e("addSeconds",function(e){this.setSeconds(this.getSeconds()+e);return this});e("zeroTime",function(){this.setMilliseconds(0);this.setSeconds(0);this.setMinutes(0);this.setHours(0);return this});e("asString",function(e){var n=e||Date.format;return n.split("yyyy").join(this.getFullYear()).split("yy").join((this.getFullYear()+"").substring(2)).split("dd").join(t(this.getDate())).split("d").join(this.getDate()).split("DD").join(this.getDayName(false)).split("D").join(this.getDayName(true)).split("mmmm").join(this.getMonthName(false)).split("mmm").join(this.getMonthName(true)).split("mm").join(t(this.getMonth()+1)).split("hh").join(t(this.getHours())).split("min").join(t(this.getMinutes())).split("ss").join(t(this.getSeconds()))});Date.fromString=function(e,t){var n=t||Date.format,r=new Date("01/01/1977"),i=0,s,o,u,a,f;s=n.indexOf("mmmm");if(s>-1){for(a=0;a<Date.monthNames.length;a++){f=e.substr(s,Date.monthNames[a].length);if(Date.monthNames[a]==f){i=Date.monthNames[a].length-4;break}}r.setMonth(a)}else{s=n.indexOf("mmm");if(s>-1){f=e.substr(s,3);for(a=0;a<Date.abbrMonthNames.length;a++){if(Date.abbrMonthNames[a]==f)break}r.setMonth(a)}else{r.setMonth(Number(e.substr(n.indexOf("mm"),2))-1)}}u=n.indexOf("yyyy");if(u>-1){if(s<u){u+=i}r.setFullYear(Number(e.substr(u,4)))}else{if(s<u){u+=i}r.setFullYear(Number(Date.fullYearStart+e.substr(n.indexOf("yy"),2)))}o=n.indexOf("dd");if(s<o){o+=i}r.setDate(Number(e.substr(o,2)));if(isNaN(r.getTime())){return false}return r};var t=function(e){var t="0"+e;return t.substring(t.length-2)}})()